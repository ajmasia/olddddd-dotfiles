#!/usr/bin/env bash

check_genially_vpn_status() {
  echo "$(systemctl is-active openvpn-work-dev.service)"
}

show_vpn_status() {
  vpn_status=$(check_genially_vpn_status)

  if [[ $vpn_status = "active" ]]; then
    echo "%{B#21252b}%{F#fbd065}ï¦Œ%{B- F-}"
  else
    echo "%{B#21252b}%{F#868686}ï¦Œ%{B- F-}"
  fi
}

connect_genially_vpn() {
  systemctl start openvpn-work-dev.service
  notify-send "Genially VPN $(check_genially_vpn_status) ðŸŸ¢"
}

disconnect_genially_vpn() {
  systemctl stop openvpn-work-dev.service
  notify-send "Genially VPN $(check_genially_vpn_status) â›”"
}


case "$1" in
  --toggle)
    vpn_status=$(check_genially_vpn_status)

    if [[ $vpn_status = "inactive" ]]; then
      connect_genially_vpn
      # sleep 5 && xdg-open https://dashboard-sorrycypress.genially.com/
    else
      disconnect_genially_vpn
    fi

    ;;
  *)
    show_vpn_status 
    ;;
esac


